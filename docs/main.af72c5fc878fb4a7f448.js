(()=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,r){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,r)}function r(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e):r}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}var c=function(){function t(e,r,o){n(this,t),this.x=e,this.y=r,this.div=o,this.position(this.x,this.y)}return a(t,[{key:"position",value:function(t,e){this.div.style.top="".concat(30*e,"px"),this.div.style.left="".concat(30*t,"px")}},{key:"shift",value:function(t,e){this.previousX=this.x,this.previousY=this.y,this.x=t,this.y=e,this.position(t,e)}}]),t}(),u=document.querySelector(".game-grid"),l=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&e(t,r)}(s,t);var i,c,l=(i=s,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=o(i);if(c){var n=o(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return r(this,t)});function s(t,e,r,o){var i;return n(this,s),(i=l.call(this,t,e,r)).color=o,i.events(),i}return a(s,[{key:"events",value:function(){this.div.classList.add("square"),this.div.classList.add(this.color),this.position(this.x,this.y),u.append(this.div)}},{key:"removeFromGrid",value:function(){u.removeChild(this.div)}}]),s}(c);function s(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var d=["blue","red","yellow","green","purple"];function y(t){var e,r,o,n=(r=function(t){var e,r=function(t){if(Array.isArray(t))return f(t)}(e=Array(225).keys())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();r.pop();var o=[];t.forEach((function(t){var e=t.x+15*t.y;o.push(e)}));var n=r.filter((function(t){return o.indexOf(t)<0}))[Math.floor(Math.random()*(225-t.length)+1)];return[n%15,Math.floor(n/15)]}(t),o=2,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){c=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw n}}return i}}(r,o)||s(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],a=n[1];return console.log(i+","+a),new l(i,a,document.createElement("div"),(e=Math.floor(5*Math.random()),d[e]))}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}var p=0,h="up";function m(t,e,r){h==t?(p+=90,r.div.style.transform="rotate(".concat(p,"deg)")):h==e&&(p-=90,r.div.style.transform="rotate(".concat(p,"deg)"))}function g(t,e){var r=t.x,o=t.y;return"up"==e&&t.y>0?(m("left","right",t),h=e,[r,--o]):"down"==e&&t.y<14?(m("right","left",t),h=e,[r,++o]):"left"==e&&t.x>0?(m("down","up",t),h=e,[--r,o]):"right"==e&&t.x<14&&(m("up","down",t),h=e,[++r,o])}function b(t,e,r,o){t[e].shift(r,o);var n=e+1;t[n]&&b(t,n,t[e].previousX,t[e].previousY)}function w(t,e){if(g(t[0],e)){var r=(i=g(t[0],e),a=2,function(t){if(Array.isArray(t))return t}(i)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var o,n,i=[],a=!0,c=!1;try{for(r=r.call(t);!(a=(o=r.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){c=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(c)throw n}}return i}}(i,a)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(t,e):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],n=r[1];return!function(t,e,r){var o=!1;return t.slice(1,t.length-1).forEach((function(t){e===t.x&&r===t.y&&(o=!0)})),o}(t,o,n)&&(b(t,0,o,n),!0)}var i,a;return!1}function x(){var t=new c(7,7,document.querySelector(".head")),e=new l(7,8,document.createElement("div"),"violet"),r=new l(7,9,document.createElement("div"),"violet");return t.div.style.transform="rotate(0deg)",t.div.classList.add("head__visible"),setTimeout((function(){t.div.classList.add("square__transition")}),1),e.div.classList.add("square__transition"),r.div.classList.add("square__transition"),[t,e,r]}document.querySelector(".gameover__restart-button").addEventListener("click",(function(){p=0,h="up"}));const _={up:"down",down:"up",left:"right",right:"left"};function S(t){return t.code.toLowerCase().slice(5)}var L,A,E,O="up",q=0,j=0,k=document.querySelector(".score-board__score"),I=document.querySelector(".gameover__score-number");function R(t,e){w(t,e)?function(t,e){if(t[0].x==e.x&&t[0].y==e.y){var r=t[t.length-1];return setTimeout((function(){r.div.style.borderRadius="10px",e.shift(r.previousX,r.previousY),r.x<e.x&&r.y==e.y?(console.log("left"),e.div.style.borderRadius="0 15px 15px 0"):r.x>e.x&&r.y==e.y?e.div.style.borderRadius="15px 0 0 15px":r.x==e.x&&r.y>e.y?e.div.style.borderRadius="15px 15px 0 0":r.x==e.x&&r.y<e.y&&(e.div.style.borderRadius="0 0 15px 15px")}),100),t.push(e),setTimeout((function(){e.div.classList.add("square__transition")}),161),!0}}(t,L)?(L=y(t),q++,k.innerHTML="".concat(q),j=0):j=function(t,e){var r=t[t.length-2],o=t[t.length-1];return o.x==o.previousX?o.y<o.previousY?r.x<o.x?(e-=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("up to left"),console.log(e)):r.x>o.x&&(e+=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("up to right"),console.log(e)):o.y>o.previousY&&(r.x>o.x?(e-=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("down to right"),console.log(e)):r.x<o.x&&(e+=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("down to left"),console.log(e))):o.y==o.previousY&&(o.x<o.previousX?r.y<o.y?(e+=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("left to up"),console.log(e)):r.y>o.y&&(e-=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("left to down"),console.log(e)):o.x>o.previousX&&(r.y<o.y?(e-=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("right to up"),console.log(e)):r.y>o.y&&(e+=90,o.div.style.transform="rotate(".concat(e,"deg)"),console.log("right to down"),console.log(e)))),e}(t,j):(window.removeEventListener("keydown",T),clearInterval(E),I.innerHTML="".concat(q),console.log("link to gameover"),document.querySelector(".gameover").classList.add("overlay__transition"),document.querySelector(".gameover").classList.add("gameover__display"))}function T(t){var e=function(t,e){return"ArrowUp"===t.code||"ArrowDown"===t.code||"ArrowLeft"===t.code||"ArrowRight"===t.code?S(t)!==_[e]?"change":"no change":"stop"}(t,O);"change"===e?(function(t,e){R(t,e),clearInterval(E),E=setInterval((function(){R(t,e)}),400)}(A,S(t)),O=S(t)):"stop"===e&&clearInterval(E)}window.addEventListener("keydown",(function t(e){"ArrowUp"!==e.code&&"ArrowLeft"!==e.code&&"ArrowRight"!==e.code||(A=x(),L=y(A),document.querySelector(".start").classList.add("start__hide"),O=S(e),E=setInterval((function(){R(A,O)}),400),window.addEventListener("keydown",T),window.removeEventListener("keydown",t))})),document.querySelector(".gameover__restart-button").addEventListener("click",(function(){A[0].div.classList.remove("transition"),A.shift(),A.forEach((function(t){return t.removeFromGrid()})),L.removeFromGrid(),O="up",q=0,j=0,k.innerHTML="0",A=x(),L=y(A),window.addEventListener("keydown",T),document.querySelector(".gameover").classList.remove("gameover__display")}))})();